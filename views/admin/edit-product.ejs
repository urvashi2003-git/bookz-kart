<%- include('../layouts/admin-header.ejs') %>

    <div class="dash-content container add">
        <h2 class="page-title">Edit Product</h2>
        <a href="/admin/product" class="btn "><i class="fa fa-angle-left"></i></a>
        <br><br>
        <div class="row">
            <form id="add-edit" method="post" action="/admin/product/edit-product/<%= product._id %>"
                enctype="multipart/form-data">
                <% error.forEach(function(err){ %>
                    <div class="alert alert-success" role="alert">
                        <%= err %>
                    </div>
                    <%})%>
                        <div class="form-group">
                            <label for="title">Title</label>
                            <input id="title" type="text" class="box" name="title" value="<%= product.title %>"
                                placeholder="Title">
                        </div>
                        <div class="form-group">
                            <label for="author">Author</label>
                            <input id="author" type="text" class="box" name="author" value="<%= product.author %>"
                                placeholder="Author">
                        </div>
                        <div class="form-group">
                            <label for="publishDate">Publish Date</label>
                            <% if (product.publishDate) { %>
                                <% var formattedDate=product.publishDate.toISOString().split('T')[0]; %>
                                    <input id="publishDate" type="date" class="box" value="<%= formattedDate %>"
                                        name="publishDate" placeholder="Publish Date">
                                    <% } else { %>
                                        <input id="publishDate" type="date" class="box" name="publishDate"
                                            placeholder="Publish Date">
                                        <% } %>
                        </div>
                        <div class="form-group">
                            <label for="pageCount">Page Count</label>
                            <input id="pageCount" type="number" class="box" name="pageCount"
                                value="<%= product.pageCount %>" placeholder="Page Count">
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" type="text" class="box" cols="30" rows="4" name="description"
                                placeholder="description"><%= product.description %></textarea>
                        </div>
                        <div class="form-group">
                            <label for="category">Category</label>
                            <select id="category" type="text" class="box" name="category" value=""
                                placeholder="category">
                                <% categories.forEach(function(cat){ %>
                                    <option value="<%= cat.title %>" <% if (cat.slug==product.category) { %>
                                        selected="selected"
                                        <% } %>
                                            > <%= cat.title %>
                                    </option>
                                    <% }); %>
                            </select>
                        </div>
                        <div class="form-group">
                            <input id="image" type="file" class="box" name="image">
                            <img width="100px" height="100px" src="/public/images/product-img/<%=product.image%>"
                                id="img-prvw" alt="">
                            <input type="hidden" name="pimage" value="<%= product.image %>">

                        </div>

                        <div class="form-group">
                            <label for="price">Price</label>
                            <input id="price" type="text" class="box" name="price" value="<%= product.price %>"
                                placeholder="price in rupees">
                        </div>
                        <br>
                        <button type="submit" class="btn btn-default">Save</button>
            </form>

        </div>
    </div>

    </section>


    <%- include('../layouts/admin-footer.ejs') %>